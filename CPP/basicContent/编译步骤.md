## GCC编译步骤

cpp文件的编译可以用一个命令搞定

```shell
gcc hello.c -o hello.exe
```

从而生成`hello.exe`可执行文件

可细分为四个步骤

- 预处理
- 编译
- 汇编
- 链接

### 预处理

- 预处理， -E, 生成`xxx.i`预处理文件

  ```shell
  gcc -E hello.c -o hello.i
  ```

  - 头文件展开，不检查语法错误，可以展开任意文件
  - 宏定义展开，将宏名替换为宏值
  - 替换注释
  - 展开条件编译

### 编译

编译，-S，生成`xxx.s`汇编文件

- 逐行检查语法错误。**在四个步骤中，最耗时的步骤**
- 将C程序翻译成汇编指令，得到 `.s`汇编文件

### 汇编

汇编，-C，生成`xxx.o`目标文件

将汇编指令翻译成对应的二进制编码

### 链接

链接，无参数，生成 `xxx.exe`可执行文件

- 数据段合并
- 数据地址回填
- 库引入