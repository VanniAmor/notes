### 平滑重启PHP-FPM

kill -USR2 `cat /usr/local/php/var/run/php-fpm.pid`

### 查看目录占用容量

du -h --max-depth=1 /home/wwwroot | sort -hr 

du -h ./*

注意： 加上sort为按大小倒序，所以命令执行时间有点长

### 查看服务器磁盘空间大小

df -h

### 检测目标网络目标端口是否可连接

telnet ip port

- 下图是能连接的情况

![image-20201215162550936](https://gitee.com/Vanni/pic-bed/raw/master/img/image-20201215162550936.png)

- 下图是失败的情况

  ![image-20201215163240064](https://gitee.com/Vanni/pic-bed/raw/master/img/image-20201215163240064.png)

### gzip文件

注意，gzip压缩后，默认不保留原文件

- 压缩：gzip filename， 加上-c参数保留源文件，得到filename.gz
- 解压：gzip -d filename.gz

- 压缩整个目录：gzip -r dirname， 会压缩整个目录下所有文件，不会压缩目录



### 查看内存使用情况

https://mp.weixin.qq.com/s/ztYSMvfRdZRVKlSbNwFOZQ

使用free 和 top命令

![image-20201218165849128](https://gitee.com/Vanni/pic-bed/raw/master/img/image-20201218165849128.png)

- total：总内存
- userd：已用内存
- free：空闲内存
- buff/cache：已使用的缓存
- avaiable 可用内存

可以使用 `sync; echo 3 > /proc/sys/vm/drop_caches `清除 buff/cache

注意，在linux中会把内存当做是硬盘的高速缓存，若随便清除掉，则会严重影响系统的运行速度



![image-20201218173610788](https://gitee.com/Vanni/pic-bed/raw/master/img/image-20201218173610788.png)

### 查看当前网络的IP

curl cip.cc

![image-20210110222316706](https://gitee.com/Vanni/pic-bed/raw/master/img/image-20210110222316706.png)